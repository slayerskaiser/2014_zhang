\chapter{Introduction}

Batteries, particularly rechargeable ones, are used extensively in daily life. They provide the energy for such electrical systems as communication, automotive, and renewable power systems, among others. In order to design for and operate these systems, an accurate battery model and a means of simulating the model efficiently is needed. For example, modern battery charge and health management schemes use high-fidelity battery models to track the state of charge (SOC) and state of
health (SOH); this information is then used to predict and optimize runtime of the battery. However, most batteries have nonlinear capacitive effects, which require the use of a nonlinear filter. This thesis provides one possible solution to this problem by choosing an appropriate battery model and testing the speed and accuracy of various nonlinear filters in determining the SOC.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Electrical Characteristics of Rechargeable Batteries}

A high-fidelity battery model has to accurately reproduce the various characteristics of the battery. The characteristics included in most models are the capacity and the state of charge. More accurate models include nonlinear effects, such as the rate-capacity effect and the recovery effect, along with self-discharge and the effects of ambient temperature. The dynamic electrical attributes, such as the current-voltage (i-v) characteristics and transient responses, can also be modeled.

The capacity of a battery is the amount of electric charge it can store, measured in the SI unit Ampere-hours (Ah). Commonly, for rechargeable battery specifications, the subunit milliampere-hour (mAh) is used. Due to the electrochemical nature of batteries, a battery's available capacity decreases as the rate of discharge increases. Therefore, the capacity for a battery is typically stated for a given discharge rate. For lead-acid batteries, this diminishing capacity with increasing discharge rate is known as Peukert's law, which states that for a one-ampere discharge rate~\cite{doerffel06}
\begin{equation}
C_p = I^k t,
\end{equation}
where $C_p$ is the capacity at a one-ampere discharge rate in Ah, $I$ is the discharge current in A, $t$ is the time to discharge the battery in hours, and $k>=1$ is the dimensionless Peukert constant, typically between 1.1 and 1.3 for a lead-acid battery. The constant $k$ only equals unity for an ideal accumulator, so for real batteries, $k$ is always greater than unity. Thus, for a given increase in the discharge current, the discharge time decreases by a proportionally greater amount. Therefore, the effective, or available, capacity $Ct$ is reduced. For a general battery, this effect is known as the rate-capacity effect. Related to this is the recovery effect, so called because when a battery is allowed to rest during an idle period, the battery ``recovers'' available capacity previously lost during discharge due to the rate-capacity effect.

Both the rate-capacity effect and the recovery effect can be explained by the electrochemical nature of the battery. During discharge the concentration of the active material around the electrode is depleted and the active materials in the depletion region move towards the electrode to reduce the concentration gradient~\cite{chiasserini99}. Because the speed at which the concentration gradient is equalized is limited, the faster the rate of discharge, the less active material has been replenished, resulting in a decrease in the capacity. Likewise, when the battery is allowed to rest, the active material gradient has additional time to equalize and increase the available capacity.

Closely related to the capacity is the SOC. This thesis defines it as the ratio between the remaining capacity and the maximum capacity, with both capacities measured using the amount of active material within the battery. This definition then denotes the proportion of remaining chemical energy rather the the available energy and is unaffected by the rate-capacity and recovery effects. Note that a fully charged battery has an SOC of unity and a fully discharged battery has an SOC of
zero, regardless of the available capacity. Additionally, it is convenient to establish the relationship between the SOC of the battery and its open-circuit voltage $V_{OC}$, which is useful for simulation of the i-v characteristics and transient responses. $V_\text{OC}$ can be thought as the limit of the measured battery voltage after recovery.

Other more minor effects that are usually incorporated into models are self-discharge, the effect of ambient temperature, and aging. Self-discharge refers to an idle battery decreasing its SOC over time due to internal chemical reactions. It is dependent on the type of battery, SOC, ambient temperatures, and other factors. The ambient temperature has effects on the internal resistance of the battery and the self-discharge rate. Commonly, the battery is designed to operate with a narrow range of temperatures. Below the operating temperature range, the internal resistance increases, decreasing the capacity. Above the operating range, the internal resistance decreases, not only increasing the capacity but also the self-discharge rate; thus, the actual capacity is lowered due to the increased self-discharge. Aging refers to the decrease in battery performance measures, such as capacity, self-discharge, and internal resistance, over time due to unwanted chemical reactions. In practice, aging is indicated by the SOH, defined as the ratio between the current maximum capacity and that of a new battery. The SOH threshold at which the battery performance is considered too degraded varies by application.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Rechargeable Battery Models}

This study is concerned with prediction of the SOC of a battery using noisy measurements of its current and voltage. To do so accurately for a general load, incorporation of the rate-capacity and recovery effects as well as the transient i-v characteristics is desirable. It is also desirable that the model can be easily tuned for different battery types. There are several battery models that meet some or all of these requirements. The remainder of this section discusses the
characteristics of these battery models and chooses the best one for the purposes of this thesis.

The battery models can be divided into five categories: electrochemical, computational intelligence, analytical, stochastic, and eletrical-circuit models. The first two types are very accurate but computationally expensive. Among the five types, electrochemical models are the most accurate, but they require in-depth knowledge of the chemical processes to create and impose large computaional costs~\cite{jongerden09}. Computational intelligence models can be similar in accuracy to
electrochemical models, but their learning period is highly computationally expensive~\cite{capizzi11,shen02}. The remaining categories and examples of battery models in them will be discussed in the remainder of this section.

Analytical models are simplified electrochemical models that trade off accuracy for simplicity. One of the simpliest such models is Peukert's law, described above. It is able to model the rate-capacity effect but not the recovery effect. More complicated models, such as the kinetic battery model and the diffusion model, are able to describe both the rate-capacity effect and the recovery effect. However, the current examples of analytical models cannot describe the transient i-v characteristics of batteries.

The kinetic battery model, initially created for large lead-acid batteries, describes the battery as a kinetic process, using two charge wells for the bound and available charges connected by a valve whose flow rate is proportional to the height difference between the wells~\cite{manwell93}. The flow rate of the valve should be lower than the typical discharge rate of the battery. During discharge from the available-charge well, the bound charges flow through the valve to equalize the heights of the two wells. It can be seen that for slower discharge
rates, more charge flows through the valve and the effective capacity increases. Likewise, during idle periods for the battery, the available charge increases. Thus, the model is able to describe the rate-capacity and recovery effects.

Related to the kinetic battery model is the diffusion model, which describes the movement of the ions in the electrolyte of a lithium-ion battery~\cite{rakhmatov01}. Like in the kinetic battery model, the difference in the concentration of adjacent ions along the length of the battery determines the diffusion rate of the ions. The available charges are those ions directly touching the electrode of the battery. It can be seen that the kinetic battery model is a first-order approximation of the diffusion
model~\cite{jongerden09}, so naturally the diffusion model also describes the rate-capacity and recovery effects.

% Analytical models are simplified electrochemical models that describe the nonlinearly capacity effects of batteries. One of the most well known is Peukert's law, described above. It describes the nonlinear rate-capacity effect but not the recovery effect.

% The kinetic battery model is a more advanced analytical model that describes the chemical processes of large lead-acid batteries using a kinetic process~\cite{manwell93}. It assumes the battery has two charge wells for the bound and available charges, seperated by a valve with a limited charge flow rate. During discharge, charge lost from the available charge well is replenished from the bound charge well through the valve. Thus, for higher discharge rates, the deliverable charge is less, because less of the bound charges flow through the valve. Additionally, when the battery is idle, the charges between the wells equalize through the valve. This model explains both the rate-capacity effect and the recovery effect.

% Related to the kinetic battery model is the diffusion model, based on the diffusion of ions in the electrolyte of lithium-ion batteries~\cite{rakhmatov01}. Rather than having the valve between the charge wells limiting the flow of charge, the diffusion model restricts the change in the charge concentration of the eletrolyte, given by a diffusion coefficient. It can be seen that the kinetic battery model is a first-order approximation of the diffusion model~\cite{jongerden09}.

Stochastic models

Finally, eletrical-circuit models

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Nonlinear Filtering Methods}

The battery model chosen for the purposes of this thesis has the advantage that it can be written in state-space form for use with commonly available state space filters. The rest of this section discusses the various nonlinear filtering techniques that can be applied to the model. [I have yet to read the paper.]
